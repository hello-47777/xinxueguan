/* ================= 1. 强制全局暗黑底色 ================= */
html, body, .vp-doc {
  background-color: #0f172a !important;
  color: #f8fafc !important;
}
/* 隐藏顶部太阳/月亮切换，防止误触变白 */
.VPSwitchAppearance { display: none !important; }

/* ================= 2. 侧边栏：官方底层变量控制（绝不重叠） ================= */
:root {
  --vp-sidebar-width: 400px !important; 
}

.VPSidebar {
  background-color: #0b1120 !important;
  border-right: 1px solid rgba(255,255,255,0.1) !important;
}

/* 侧边栏文字：默认多行换行 */
.VPSidebarItem.level-1 .VPLink .text {
  font-size: 1rem !important;
  line-height: 1.6 !important;
  white-space: normal !important; 
  display: block !important;
}

/* ⚡️ 核心响应式：当窗口缩小或缩放 (小于 1280px) 时，文字变单行+省略号 */
@media (max-width: 1280px) {
  .VPSidebarItem.level-1 .VPLink .text {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
}

/* ================= 3. 术语表 Terminology 深度修复 (绝对黑底白字) ================= */
.vp-doc table {
  width: 100% !important;
  border-collapse: collapse !important;
  background-color: #1e293b !important; /* 深蓝灰底色 */
}
.vp-doc th, .vp-doc td {
  background-color: #1e293b !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  color: #f8fafc !important; /* 亮白色文字 */
  padding: 12px !important;
}
.vp-doc th {
  background-color: #0f172a !important; /* 表头颜色更深一点 */
  font-weight: bold !important;
}

/* ================= 4. 知识图谱 Mermaid 强制显色 ================= */
.mermaid {
  background-color: #0f172a !important;
  border: 1px solid #38bdf8 !important;
  border-radius: 8px;
  padding: 20px;
  margin: 20px 0;
  min-height: 100px; /* 保证框一直存在 */
}
.mermaid svg text, 
.mermaid svg .nodeLabel, 
.mermaid svg .edgeLabel, 
.mermaid svg span {
  fill: #ffffff !important;
  color: #ffffff !important;
  text-shadow: none !important;
}
.mermaid svg path {
  stroke: #38bdf8 !important; /* 连接线亮蓝 */
}
.mermaid svg .node rect, 
.mermaid svg .node circle, 
.mermaid svg .node polygon {
  fill: #1e293b !important; /* 节点深底色 */
  stroke: #38bdf8 !important;
}

/* ================= 5. 核心考点区块 ================= */
.vp-doc .custom-block { background-color: rgba(56, 189, 248, 0.1) !important; border-color: #38bdf8 !important; }
.vp-doc .custom-block p, .vp-doc .custom-block li { color: #f8fafc !important; }

/* ================= 6. 首页课程卡片 ================= */
.course-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; padding: 20px; }
.course-card { background: #1e293b !important; border-radius: 12px; overflow: hidden; position: relative; text-decoration: none !important; display: block;}
.card-image { height: 180px; background-size: cover; background-position: center; position: relative; font-size: 1.5rem; padding: 10px; }
.image-overlay { position: absolute; bottom: 10px; right: 10px; }
.dark-badge { background: rgba(0,0,0,0.8); color: #fff; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
.card-content { padding: 15px; }
.card-title { font-size: 1.1rem; font-weight: bold; margin-bottom: 5px; color: #fff !important; }
.card-subtitle { color: #94a3b8 !important; font-size: 0.9rem; margin-bottom: 15px; }
.card-footer { display: flex; justify-content: space-between; color: #cbd5e1 !important; font-size: 0.8rem; }

/* ================= 终极修补：侧边栏绝对靠左 & 防止主内容重叠 ================= */
/* 1. 强行把侧边栏钉在浏览器最左侧 */
.VPSidebar {
  position: fixed !important;
  left: 0 !important;
  top: 0 !important;
  bottom: 0 !important;
  width: 400px !important;
  transform: none !important; /* 禁止任何居中位移 */
  z-index: 9999 !important; /* ⚡️ 保证 70% 缩放时浮在最上层，绝不消失 */
}

/* 2. ⚡️ 核心修复：只对【有侧边栏的文档页】向右推，主页绝对不推！ */
.VPContent.has-sidebar {
  padding-left: 400px !important;
  width: 100% !important;
}

/* 3. 响应式：当窗口变窄（手机/半屏）时，恢复原生自适应 */
@media (max-width: 960px) {
  .VPSidebar {
    width: 100vw !important; /* 手机端让侧边栏满屏 */
    transform: translateX(-100%) !important; /* 手机端默认隐藏侧边栏 */
  }
  .VPSidebar.open {
    transform: translateX(0) !important; /* 点击菜单按钮时滑出 */
  }
  .VPContent.has-sidebar {
    padding-left: 0 !important; /* 手机端取消强制右推 */
  }
}